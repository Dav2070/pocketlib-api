(# params: user_id: int, properties: hash)
(# TableObject.create decoded_jwt.user_id env.AUTHOR_TABLE_ID )

(catch (
	(TableObject.create user_id env.AUTHOR_TABLE_ID properties)
) (
	(var error errors#0)
	
	(if (((error.code == 0) or (error.code == 2)) or (error.code == 3)) (
		(# Table or user does not exist, or object didn't save)
		(func render_validation_errors ((list (hash (error (get_error 1103)) (status 500)))))
	) else (
		(# Action not allowed)
		(func render_validation_errors ((list (hash (error (get_error 1102)) (status 403)))))
	))
))